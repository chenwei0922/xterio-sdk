var X=Object.defineProperty;var P=(n,e,t)=>e in n?X(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var N=(n,e,t)=>P(n,typeof e!="symbol"?e+"":e,t);import{aN as ee,aO as x,aP as ne}from"./index-Bn-ps2Oq.js";import{d as F,a as V}from"./index-DzX3kRot.js";var te=ee(),re=new te.ec("secp256k1"),C=class{constructor(n,e,t){N(this,"id");N(this,"masterKey");N(this,"childKey");this.id=n,this.masterKey=typeof e=="string"?JSON.parse(e):e,this.childKey=typeof t=="string"?JSON.parse(t):t}static async gen(n,e){await m();const t=await de(n,typeof e=="string"?e:JSON.stringify(e));return new C(t.id,t.master_key,t.child_key)}static from(n){const e=typeof n=="string"?JSON.parse(n):n;return new C(e.id,e.masterKey,e.childKey)}to(){return JSON.stringify({id:this.id,masterKey:this.masterKey,childKey:this.childKey})}pub(){const n=re.keyFromPublic({x:this.childKey.public.q.x,y:this.childKey.public.q.y});return A(n.getPublic().encodeCompressed("hex"))}async sign(n,e,t,r=!1){return await m(),this._sign(n,e,t,r)}async batchSign(n,e,t){return await m(),Promise.all(t.map(r=>this._sign(n,e,r)))}async _sign(n,e,t,r=!1){t=z(t),e=typeof e=="string"?e:JSON.stringify(e);const o=new O(this.id,"",JSON.stringify(this.childKey)),i=JSON.parse(await be(n,e,t,o,r));return{r:A(i.r),s:A(i.s),v:i.recid}}async signTx(n,e,t){await m();const r=new O(this.id,"",JSON.stringify(this.childKey)),o=JSON.parse(await we(n,typeof e=="string"?e:JSON.stringify(e),JSON.stringify(t),r));return Y(t)&&(o.v="0x"+(parseInt(o.v.substring(2),16)+((t==null?void 0:t.chainId)||1)*2+35).toString(16)),o}async signTronTx(n,e,t){var l,u,f;await m();let r=(t==null?void 0:t.chainId)||728126428;r=typeof r=="string"&&r.startsWith("0x")?parseInt(r,16):Number(r);const o=Object.keys(t).filter(h=>["from","to","value","data","gas","originEnergyLimit","name","abi","consumeUserResourcePercent","tokenId","tokenValue"].includes(h)).reduce((h,v)=>(h[v]=t[v],h),{});o!=null&&o.to||(o.originEnergyLimit=(o==null?void 0:o.originEnergyLimit)||1e17),((l=o==null?void 0:o.data)==null?void 0:l.length)>2&&(o.gas=(o==null?void 0:o.gas)||"0x220bd20");const i=await this.rpcRequest(n,e,r,"buildTransaction",{...o});if(!i.result)throw new $(((u=i==null?void 0:i.error)==null?void 0:u.code)??10001,((f=i==null?void 0:i.error)==null?void 0:f.message)??"System error","","");const s=i.result.transaction,w=await this.sign(n,e,A(s.txID));return s.signature=[w.r.toString("hex")+w.s.toString("hex")+`0${w.v}`],`0x${x.from(JSON.stringify(s)).toString("hex")}`}async rpcRequest(n,e,t,r,...o){e=typeof e=="string"?JSON.parse(e):e;const i=`${n.replace("api","rpc")}/evm-chain?chainId=${t}`,s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Basic ${x.from(`${e.project_uuid}:${e.project_client_key}`,"utf8").toString("base64")}`},body:JSON.stringify({id:+new Date,jsonrpc:"2.0",chainId:t,method:r,params:o})});if(!s.ok)throw new $(10001,"System error, request failed");return s.json()}async refresh(n,e){await m();const t=new O(this.id,JSON.stringify(this.masterKey),""),r=await le(n,typeof e=="string"?e:JSON.stringify(e),t),o=new C(r.id,r.master_key,r.child_key);return this.id=o.id,this.masterKey=o.masterKey,this.childKey=o.childKey,o}};function _e(n){const e=JSON.parse(n);if(Y(e)){let t=1;return"chainId"in e&&e.chainId!==void 0&&(typeof e.chainId=="number"?t=e.chainId:t=e.chainId.startsWith("0x")?parseInt(e.chainId.substring(2),16):parseInt(e.chainId)),F.Transaction.fromTxData(e,{common:V.Common.custom({chainId:t},{hardfork:V.Hardfork.SpuriousDragon})}).getMessageToSign()}else return F.TransactionFactory.fromTxData(e).getMessageToSign()}function Y(n){return!("type"in n)||n.type===void 0||n.type==="0x0"||n.type===0}var _,S=new Array(128).fill(void 0);S.push(void 0,null,!0,!1);function c(n){return S[n]}var R=S.length;function oe(n){n<132||(S[n]=R,R=n)}function k(n){const e=c(n);return oe(n),e}var Z=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Z.decode();var J=null;function K(){return(J===null||J.byteLength===0)&&(J=new Uint8Array(_.memory.buffer)),J}function y(n,e){return n=n>>>0,Z.decode(K().subarray(n,n+e))}function a(n){R===S.length&&S.push(S.length+1);const e=R;return R=S[e],S[e]=n,e}var g=0,W=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ie=typeof W.encodeInto=="function"?function(n,e){return W.encodeInto(n,e)}:function(n,e){const t=W.encode(n);return e.set(t),{read:n.length,written:t.length}};function b(n,e,t){if(t===void 0){const w=W.encode(n),l=e(w.length)>>>0;return K().subarray(l,l+w.length).set(w),g=w.length,l}let r=n.length,o=e(r)>>>0;const i=K();let s=0;for(;s<r;s++){const w=n.charCodeAt(s);if(w>127)break;i[o+s]=w}if(s!==r){s!==0&&(n=n.slice(s)),o=t(o,r,r=s+n.length*3)>>>0;const w=K().subarray(o+s,o+r),l=ie(n,w);s+=l.written}return g=s,o}function U(n){return n==null}var j=null;function d(){return(j===null||j.byteLength===0)&&(j=new Int32Array(_.memory.buffer)),j}function q(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const o=n.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=n.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(n)){const o=n.length;let i="[";o>0&&(i+=q(n[0]));for(let s=1;s<o;s++)i+=", "+q(n[s]);return i+="]",i}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}function ce(n,e,t,r){const o={a:n,b:e,cnt:1,dtor:t},i=(...s)=>{o.cnt++;const w=o.a;o.a=0;try{return r(w,o.b,...s)}finally{--o.cnt===0?_.__wbindgen_export_2.get(o.dtor)(w,o.b):o.a=w}};return i.original=o,i}function se(n,e,t){_._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__he561f054b64cb340(n,e,a(t))}function ae(n,e){const t=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),r=g,o=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g,s=_.eddsa_keygen(t,r,o,i);return k(s)}function M(n,e){const t=e(n.length*1)>>>0;return K().set(n,t/1),g=n.length,t}function B(n,e){if(!(n instanceof e))throw new Error(`expected instance of ${e.name}`);return n.ptr}function ge(n,e,t,r){const o=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g,s=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),w=g,l=M(t,_.__wbindgen_malloc),u=g;B(r,L);var f=r.__destroy_into_raw();const h=_.eddsa_sign(o,i,s,w,l,u,f);return k(h)}function de(n,e){const t=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),r=g,o=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g,s=_.ecdsa_keygen(t,r,o,i);return k(s)}function be(n,e,t,r,o){const i=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),s=g,w=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),l=g,u=M(t,_.__wbindgen_malloc),f=g;B(r,O);var h=r.__destroy_into_raw();const v=_.ecdsa_sign(i,s,w,l,u,f,h,U(o)?16777215:o?1:0);return k(v)}function we(n,e,t,r){const o=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g,s=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),w=g,l=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),u=g;B(r,O);var f=r.__destroy_into_raw();const h=_.ecdsa_sign_tx(o,i,s,w,l,u,f);return k(h)}function le(n,e,t){const r=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),o=g,i=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),s=g;B(t,O);var w=t.__destroy_into_raw();const l=_.ecdsa_rotate(r,o,i,s,w);return k(l)}function fe(n,e){let t,r;try{const f=_.__wbindgen_add_to_stack_pointer(-16),h=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),v=g,T=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),E=g;_.hash_password(f,h,v,T,E);var o=d()[f/4+0],i=d()[f/4+1],s=d()[f/4+2],w=d()[f/4+3],l=o,u=i;if(w)throw l=0,u=0,k(s);return t=l,r=u,y(l,u)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,r)}}function ue(n,e){let t,r;try{const f=_.__wbindgen_add_to_stack_pointer(-16),h=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),v=g,T=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),E=g;_.encrypt(f,h,v,T,E);var o=d()[f/4+0],i=d()[f/4+1],s=d()[f/4+2],w=d()[f/4+3],l=o,u=i;if(w)throw l=0,u=0,k(s);return t=l,r=u,y(l,u)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,r)}}function ye(n,e){let t,r;try{const f=_.__wbindgen_add_to_stack_pointer(-16),h=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),v=g,T=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),E=g;_.decrypt(f,h,v,T,E);var o=d()[f/4+0],i=d()[f/4+1],s=d()[f/4+2],w=d()[f/4+3],l=o,u=i;if(w)throw l=0,u=0,k(s);return t=l,r=u,y(l,u)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(t,r)}}function p(n,e){try{return n.apply(this,e)}catch(t){_.__wbindgen_exn_store(a(t))}}function pe(n,e,t,r){_.wasm_bindgen__convert__closures__invoke2_mut__h47250f64619b534a(n,e,a(t),a(r))}var O=class{static __wrap(n){n=n>>>0;const e=Object.create(O.prototype);return e.__wbg_ptr=n,e}__destroy_into_raw(){const n=this.__wbg_ptr;return this.__wbg_ptr=0,n}free(){const n=this.__destroy_into_raw();_.__wbg_ecdsakey_free(n)}get id(){let n,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_ecdsakey_id(o,this.__wbg_ptr);var t=d()[o/4+0],r=d()[o/4+1];return n=t,e=r,y(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,e)}}set id(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=g;_.__wbg_set_ecdsakey_id(this.__wbg_ptr,e,t)}get master_key(){let n,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_ecdsakey_master_key(o,this.__wbg_ptr);var t=d()[o/4+0],r=d()[o/4+1];return n=t,e=r,y(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,e)}}set master_key(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=g;_.__wbg_set_ecdsakey_master_key(this.__wbg_ptr,e,t)}get child_key(){let n,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_ecdsakey_child_key(o,this.__wbg_ptr);var t=d()[o/4+0],r=d()[o/4+1];return n=t,e=r,y(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,e)}}set child_key(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=g;_.__wbg_set_ecdsakey_child_key(this.__wbg_ptr,e,t)}constructor(n,e,t){const r=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),o=g,i=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),s=g,w=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),l=g,u=_.ecdsakey_new(r,o,i,s,w,l);return O.__wrap(u)}},L=class{static __wrap(n){n=n>>>0;const e=Object.create(L.prototype);return e.__wbg_ptr=n,e}__destroy_into_raw(){const n=this.__wbg_ptr;return this.__wbg_ptr=0,n}free(){const n=this.__destroy_into_raw();_.__wbg_eddsakey_free(n)}get id(){let n,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_eddsakey_id(o,this.__wbg_ptr);var t=d()[o/4+0],r=d()[o/4+1];return n=t,e=r,y(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,e)}}set id(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=g;_.__wbg_set_eddsakey_id(this.__wbg_ptr,e,t)}get key_agg(){let n,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_eddsakey_key_agg(o,this.__wbg_ptr);var t=d()[o/4+0],r=d()[o/4+1];return n=t,e=r,y(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,e)}}set key_agg(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=g;_.__wbg_set_eddsakey_key_agg(this.__wbg_ptr,e,t)}get key_pair(){let n,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_eddsakey_key_pair(o,this.__wbg_ptr);var t=d()[o/4+0],r=d()[o/4+1];return n=t,e=r,y(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,e)}}set key_pair(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=g;_.__wbg_set_eddsakey_key_pair(this.__wbg_ptr,e,t)}constructor(n,e,t){const r=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),o=g,i=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),s=g,w=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),l=g,u=_.eddsakey_new(r,o,i,s,w,l);return L.__wrap(u)}},$=class{static __wrap(n){n=n>>>0;const e=Object.create($.prototype);return e.__wbg_ptr=n,e}__destroy_into_raw(){const n=this.__wbg_ptr;return this.__wbg_ptr=0,n}free(){const n=this.__destroy_into_raw();_.__wbg_servererror_free(n)}get error_code(){return _.__wbg_get_servererror_error_code(this.__wbg_ptr)}set error_code(n){_.__wbg_set_servererror_error_code(this.__wbg_ptr,n)}get message(){let n,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_servererror_message(o,this.__wbg_ptr);var t=d()[o/4+0],r=d()[o/4+1];return n=t,e=r,y(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,e)}}set message(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=g;_.__wbg_set_servererror_message(this.__wbg_ptr,e,t)}get extra(){let n,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_servererror_extra(o,this.__wbg_ptr);var t=d()[o/4+0],r=d()[o/4+1];return n=t,e=r,y(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,e)}}set extra(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=g;_.__wbg_set_servererror_extra(this.__wbg_ptr,e,t)}get path(){let n,e;try{const o=_.__wbindgen_add_to_stack_pointer(-16);_.__wbg_get_servererror_path(o,this.__wbg_ptr);var t=d()[o/4+0],r=d()[o/4+1];return n=t,e=r,y(t,r)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(n,e)}}set path(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=g;_.__wbg_set_servererror_path(this.__wbg_ptr,e,t)}constructor(n,e,t,r){const o=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;var s=U(t)?0:b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),w=g,l=U(r)?0:b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),u=g;const f=_.servererror_new(n,o,i,s,w,l,u);return $.__wrap(f)}};async function he(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")=="application/wasm")throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function me(){const n={};return n.wbg={},n.wbg.__wbindgen_object_drop_ref=function(e){k(e)},n.wbg.__wbg_servererror_new=function(e){const t=$.__wrap(e);return a(t)},n.wbg.__wbindgen_cb_drop=function(e){const t=k(e).original;return t.cnt--==1?(t.a=0,!0):!1},n.wbg.__wbindgen_string_new=function(e,t){const r=y(e,t);return a(r)},n.wbg.__wbindgen_is_undefined=function(e){return c(e)===void 0},n.wbg.__wbg_getmessagetosign_e9412d530252fd1e=function(e,t,r){const o=_e(y(t,r)),i=M(o,_.__wbindgen_malloc),s=g;d()[e/4+1]=s,d()[e/4+0]=i},n.wbg.__wbg_eddsakey_new=function(e){const t=L.__wrap(e);return a(t)},n.wbg.__wbg_ecdsakey_new=function(e){const t=O.__wrap(e);return a(t)},n.wbg.__wbindgen_string_get=function(e,t){const r=c(t),o=typeof r=="string"?r:void 0;var i=U(o)?0:b(o,_.__wbindgen_malloc,_.__wbindgen_realloc),s=g;d()[e/4+1]=s,d()[e/4+0]=i},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return a(e)},n.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const r=c(t).stack,o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},n.wbg.__wbg_error_f851667af71bcfc6=function(e,t){let r,o;try{r=e,o=t}finally{_.__wbindgen_free(r,o)}},n.wbg.__wbindgen_is_string=function(e){return typeof c(e)=="string"},n.wbg.__wbindgen_object_clone_ref=function(e){const t=c(e);return a(t)},n.wbg.__wbg_instanceof_Window_c5579e140698a9dc=function(e){let t;try{t=c(e)instanceof Window}catch{t=!1}return t},n.wbg.__wbg_fetch_bb49ae9f1d79408b=function(e,t){const r=c(e).fetch(c(t));return a(r)},n.wbg.__wbg_origin_35ef5d6a71c924b6=function(e,t){const r=c(t).origin,o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},n.wbg.__wbg_pathname_715df8a6b71fdfd7=function(e,t){const r=c(t).pathname,o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},n.wbg.__wbg_search_24b39c2a5b10e06c=function(e,t){const r=c(t).search,o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},n.wbg.__wbg_setsearch_7aeec58875c5946b=function(e,t,r){c(e).search=y(t,r)},n.wbg.__wbg_searchParams_d5568d267828eeea=function(e){const t=c(e).searchParams;return a(t)},n.wbg.__wbg_new_f6818a0e274befa9=function(){return p(function(e,t){const r=new URL(y(e,t));return a(r)},arguments)},n.wbg.__wbg_instanceof_Response_7ade9a5a066d1a55=function(e){let t;try{t=c(e)instanceof Response}catch{t=!1}return t},n.wbg.__wbg_status_d2b2d0889f7e970f=function(e){return c(e).status},n.wbg.__wbg_ok_0a0ed9a1863d8af5=function(e){return c(e).ok},n.wbg.__wbg_text_65fa1887e8f7b4ac=function(){return p(function(e){const t=c(e).text();return a(t)},arguments)},n.wbg.__wbg_instanceof_WorkerGlobalScope_5188d176509513d4=function(e){let t;try{t=c(e)instanceof WorkerGlobalScope}catch{t=!1}return t},n.wbg.__wbg_fetch_621998933558ad27=function(e,t){const r=c(e).fetch(c(t));return a(r)},n.wbg.__wbg_url_3325e0ef088003ca=function(e,t){const r=c(t).url,o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},n.wbg.__wbg_newwithstr_49e8bfa3150f3210=function(){return p(function(e,t){const r=new Request(y(e,t));return a(r)},arguments)},n.wbg.__wbg_newwithstrandinit_a4cd16dfaafcf625=function(){return p(function(e,t,r){const o=new Request(y(e,t),c(r));return a(o)},arguments)},n.wbg.__wbg_new_5cb136b036dd2286=function(){return p(function(){const e=new URLSearchParams;return a(e)},arguments)},n.wbg.__wbg_append_5b8ac576a0a2c65a=function(e,t,r,o,i){c(e).append(y(t,r),y(o,i))},n.wbg.__wbg_new_143b41b4342650bb=function(){return p(function(){const e=new Headers;return a(e)},arguments)},n.wbg.__wbg_set_76353df4722f4954=function(){return p(function(e,t,r,o,i){c(e).set(y(t,r),y(o,i))},arguments)},n.wbg.__wbg_crypto_58f13aa23ffcb166=function(e){const t=c(e).crypto;return a(t)},n.wbg.__wbindgen_is_object=function(e){const t=c(e);return typeof t=="object"&&t!==null},n.wbg.__wbg_process_5b786e71d465a513=function(e){const t=c(e).process;return a(t)},n.wbg.__wbg_versions_c2ab80650590b6a2=function(e){const t=c(e).versions;return a(t)},n.wbg.__wbg_node_523d7bd03ef69fba=function(e){const t=c(e).node;return a(t)},n.wbg.__wbg_msCrypto_abcb1295e768d1f2=function(e){const t=c(e).msCrypto;return a(t)},n.wbg.__wbg_require_2784e593a4674877=function(){return p(function(){const e=module.require;return a(e)},arguments)},n.wbg.__wbindgen_is_function=function(e){return typeof c(e)=="function"},n.wbg.__wbg_getRandomValues_504510b5564925af=function(){return p(function(e,t){c(e).getRandomValues(c(t))},arguments)},n.wbg.__wbg_randomFillSync_a0d98aa11c81fe89=function(){return p(function(e,t){c(e).randomFillSync(k(t))},arguments)},n.wbg.__wbg_get_7303ed2ef026b2f5=function(e,t){const r=c(e)[t>>>0];return a(r)},n.wbg.__wbg_newnoargs_c9e6043b8ad84109=function(e,t){const r=new Function(y(e,t));return a(r)},n.wbg.__wbg_next_ec061e48a0e72a96=function(){return p(function(e){const t=c(e).next();return a(t)},arguments)},n.wbg.__wbg_done_b6abb27d42b63867=function(e){return c(e).done},n.wbg.__wbg_value_2f4ef2036bfad28e=function(e){const t=c(e).value;return a(t)},n.wbg.__wbg_get_f53c921291c381bd=function(){return p(function(e,t){const r=Reflect.get(c(e),c(t));return a(r)},arguments)},n.wbg.__wbg_call_557a2f2deacc4912=function(){return p(function(e,t){const r=c(e).call(c(t));return a(r)},arguments)},n.wbg.__wbg_new_2b6fea4ea03b1b95=function(){const e=new Object;return a(e)},n.wbg.__wbg_self_742dd6eab3e9211e=function(){return p(function(){const e=self.self;return a(e)},arguments)},n.wbg.__wbg_window_c409e731db53a0e2=function(){return p(function(){const e=window.window;return a(e)},arguments)},n.wbg.__wbg_globalThis_b70c095388441f2d=function(){return p(function(){const e=globalThis.globalThis;return a(e)},arguments)},n.wbg.__wbg_global_1c72617491ed7194=function(){return p(function(){const e=ne.global;return a(e)},arguments)},n.wbg.__wbg_instanceof_Error_fac23a8832b241da=function(e){let t;try{t=c(e)instanceof Error}catch{t=!1}return t},n.wbg.__wbg_message_eab7d45ec69a2135=function(e){const t=c(e).message;return a(t)},n.wbg.__wbg_name_8e6176d4db1a502d=function(e){const t=c(e).name;return a(t)},n.wbg.__wbg_toString_506566b763774a16=function(e){const t=c(e).toString();return a(t)},n.wbg.__wbg_call_587b30eea3e09332=function(){return p(function(e,t,r){const o=c(e).call(c(t),c(r));return a(o)},arguments)},n.wbg.__wbg_entries_039ff76b77e573c1=function(e){const t=c(e).entries();return a(t)},n.wbg.__wbg_now_c857fb0367c762cc=function(){return Date.now()},n.wbg.__wbg_toString_e2b23ac99490a381=function(e){const t=c(e).toString();return a(t)},n.wbg.__wbg_new_2b55e405e4af4986=function(e,t){try{var r={a:e,b:t},o=(s,w)=>{const l=r.a;r.a=0;try{return pe(l,r.b,s,w)}finally{r.a=l}};const i=new Promise(o);return a(i)}finally{r.a=r.b=0}},n.wbg.__wbg_resolve_ae38ad63c43ff98b=function(e){const t=Promise.resolve(c(e));return a(t)},n.wbg.__wbg_then_8df675b8bb5d5e3c=function(e,t){const r=c(e).then(c(t));return a(r)},n.wbg.__wbg_then_835b073a479138e5=function(e,t,r){const o=c(e).then(c(t),c(r));return a(o)},n.wbg.__wbg_buffer_55ba7a6b1b92e2ac=function(e){const t=c(e).buffer;return a(t)},n.wbg.__wbg_newwithbyteoffsetandlength_88d1d8be5df94b9b=function(e,t,r){const o=new Uint8Array(c(e),t>>>0,r>>>0);return a(o)},n.wbg.__wbg_new_09938a7d020f049b=function(e){const t=new Uint8Array(c(e));return a(t)},n.wbg.__wbg_set_3698e3ca519b3c3c=function(e,t,r){c(e).set(c(t),r>>>0)},n.wbg.__wbg_newwithlength_89eeca401d8918c2=function(e){const t=new Uint8Array(e>>>0);return a(t)},n.wbg.__wbg_subarray_d82be056deb4ad27=function(e,t,r){const o=c(e).subarray(t>>>0,r>>>0);return a(o)},n.wbg.__wbg_set_07da13cc24b69217=function(){return p(function(e,t,r){return Reflect.set(c(e),c(t),c(r))},arguments)},n.wbg.__wbindgen_debug_string=function(e,t){const r=q(c(t)),o=b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=g;d()[e/4+1]=i,d()[e/4+0]=o},n.wbg.__wbindgen_throw=function(e,t){throw new Error(y(e,t))},n.wbg.__wbindgen_memory=function(){const e=_.memory;return a(e)},n.wbg.__wbindgen_closure_wrapper734=function(e,t,r){const o=ce(e,t,222,se);return a(o)},n}function ke(n,e){return _=n.exports,Q.__wbindgen_wasm_module=e,j=null,J=null,_.__wbindgen_start(),_}async function Q(n){if(_!==void 0)return _;typeof n>"u"&&(n=new URL(""+new URL("thresh_sig_wasm_bg-CTkD8zdB.wasm",import.meta.url).href,import.meta.url));const e=me();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await he(await n,e);return ke(t,r)}var ve=Q,z=n=>x.isBuffer(n)?n:n instanceof Uint8Array?x.from(n.buffer,n.byteOffset,n.byteLength):x.from(n),A=n=>{for(var e=[],t=0;t<n.length;t+=2)e.push(parseInt(n.substr(t,2),16));return z(e)},Se=n=>{if(n.length<1)return n;let e=n.length-1,t=0;for(let r=0;r<n.length/2;r++)t=n[r],n[r]=n[e],n[e]=t,e--;return n};async function Oe(n){return new Promise(e=>setTimeout(e,n))}async function Ee(n,e){return await m(),fe(n,e)}async function Ie(n,e){return await m(),ue(n,e)}async function Je(n,e){return await m(),ye(n,e)}var H=32,D=32,G=class{constructor(n,e,t){N(this,"id");N(this,"keyAgg");N(this,"keyPair");this.id=n,this.keyAgg=typeof e=="string"?JSON.parse(e):e,this.keyPair=typeof t=="string"?JSON.parse(t):t}static async gen(n,e){await m();const t=await ae(n,typeof e=="string"?e:JSON.stringify(e));return new G(t.id,t.key_agg,t.key_pair)}static from(n){const e=typeof n=="string"?JSON.parse(n):n;return new G(e.id,e.keyAgg,e.keyPair)}to(){return JSON.stringify({id:this.id,keyAgg:this.keyAgg,keyPair:this.keyPair})}pub(){return A(this.keyAgg.apk.bytes_str)}async sign(n,e,t){return await m(),this._sign(n,e,t)}async batchSign(n,e,t){return await m(),Promise.all(t.map(r=>this._sign(n,e,r)))}async _sign(n,e,t){const r=new L(this.id,JSON.stringify(this.keyAgg),JSON.stringify(this.keyPair)),o=JSON.parse(await ge(n,typeof e=="string"?e:JSON.stringify(e),z(t),r)),i=x.from(o.R.bytes_str.padStart(D*2,"0"),"hex"),s=x.from(o.s.padStart(H*2,"0"),"hex"),w=Se(s);return x.concat([i,w],D+H)}},I={initializing:!1,initialized:!1};async function m(){for(;I.initializing;)await Oe(10);if(!I.initialized){I.initializing=!0;try{await ve(),I.initialized=!0}catch{}I.initializing=!1}}function je(){return"0.7.8"}export{C as Ecdsa,G as EdDsa,$ as ServerError,Je as decryptData,Ie as encryptData,Ee as generateKey,je as getVersion,_e as get_message_to_sign,m as initWasm};
